(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{ABqa:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n("mrSG"),i=r(n("wj3C")),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},s=function(e){function t(n,r,o){var i=e.call(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i.code=n,i.details=o,i}return o.__extends(t,e),t}(Error);function u(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function c(e,t,n){var r=u(e),o=r,i=void 0;try{var c=t.error;if(c){var l=c.status;if("string"===typeof l){if(!a[l])return new s("internal","internal");r=a[l]}o=l;var h=c.message;"string"===typeof h&&(o=h),i=c.details,void 0!==i&&(i=n.decode(i))}}catch(e){}return"ok"===r?null:new s(r,o,i)}var l=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.app.messaging?(e=this.app.messaging(),[4,e.getToken()]):[2,void 0];case 1:return t=n.sent(),t?[2,t]:[2,void 0];case 2:return n.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}(),h="type.googleapis.com/google.protobuf.Int64Value",p="type.googleapis.com/google.protobuf.UInt64Value";function f(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var d=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null===e||void 0===e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"===typeof e||"object"===typeof e)return f(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null===e)return e;if(e["@type"])switch(e["@type"]){case h:case p:var n=parseFloat(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"===typeof e||"object"===typeof e?f(e,function(e){return t.decode(e)}):e},e}(),_=function(){function e(e,t){void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new d,this.emulatorOrigin=null,this.contextProvider=new l(e)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){var r=this.emulatorOrigin;return r+"/"+t+"/"+n+"/"+e}return"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e){var t=this,n=function(n){return t.call(e,n)};return n},e.prototype.postJSON=function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var r,i;return o.__generator(this,function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},e.prototype.call=function(e,t){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,a,u,l,h,p;return o.__generator(this,function(o){switch(o.label){case 0:return n=this._url(e),t=this.serializer.encode(t),r={data:t},i=new Headers,[4,this.contextProvider.getContext()];case 1:return a=o.sent(),a.authToken&&i.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&i.append("Firebase-Instance-ID-Token",a.instanceIdToken),[4,this.postJSON(n,r,i)];case 2:if(u=o.sent(),l=c(u.status,u.json,this.serializer),l)throw l;if(!u.json)throw new s("internal","Response is not valid JSON object.");if(h=u.json.data,"undefined"===typeof h&&(h=u.json.result),"undefined"===typeof h)throw new s("internal","Response is missing data field.");return p=this.serializer.decode(h),[2,{data:p}]}})})},e}(),b="functions";function g(e,t,n){return new _(e,n)}function v(e){var t={Functions:_};e.INTERNAL.registerService(b,g,t,void 0,!0)}v(i),t.registerFunctions=v},LmZi:function(e,t,n){"use strict";n.r(t),n.d(t,"registerStorage",function(){return Pt});var r=n("wj3C"),o=n.n(r),i="https://firebasestorage.googleapis.com",a="https://firebasestorage.googleapis.com",s="/v0",u="/v0",c="storageBucket",l=12e4,h=6e4,p=-9007199254740991,f=function(){function e(e,t){this.code_=_(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return _(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),d={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function _(e){return"storage/"+e}function b(){var e="An unknown error occurred, please check the error payload for server response.";return new f(d.UNKNOWN,e)}function g(e){return new f(d.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function v(e){return new f(d.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new f(d.UNAUTHENTICATED,e)}function m(e){return new f(d.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function y(){return new f(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function T(){return new f(d.CANCELED,"User canceled the upload/download.")}function w(e){return new f(d.INVALID_URL,"Invalid URL '"+e+"'.")}function O(e){return new f(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function S(){return new f(d.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function N(){return new f(d.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function R(){return new f(d.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I(e,t,n){return new f(d.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function A(e,t,n,r){var o,i;return e===t?(o=e,i=1===e?"argument":"arguments"):(o="between "+e+" and "+t,i="arguments"),new f(d.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+o+" "+i+", received "+r+".")}function D(){return new f(d.APP_DELETED,"The Firebase app was deleted.")}function k(e){return new f(d.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function U(e,t){return new f(d.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function C(e){throw new f(d.INTERNAL_ERROR,"Internal error: "+e)}var P={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function L(e){switch(e){case P.RAW:case P.BASE64:case P.BASE64URL:case P.DATA_URL:return;default:throw"Expected one of the event types: ["+P.RAW+", "+P.BASE64+", "+P.BASE64URL+", "+P.DATA_URL+"]."}}var B=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}();function j(e,t){switch(e){case P.RAW:return new B(M(t));case P.BASE64:case P.BASE64URL:return new B(F(e,t));case P.DATA_URL:return new B(K(t),G(t))}throw b()}function M(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){var o=n<e.length-1&&56320==(64512&e.charCodeAt(n+1));if(o){var i=r,a=e.charCodeAt(++n);r=65536|(1023&i)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function x(e){var t;try{t=decodeURIComponent(e)}catch(e){throw U(P.DATA_URL,"Malformed data URL.")}return M(t)}function F(e,t){switch(e){case P.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var o=n?"-":"_";throw U(e,"Invalid character '"+o+"' found: is it base64url encoded?")}break;case P.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a){o=i?"+":"/";throw U(e,"Invalid character '"+o+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=atob(t)}catch(t){throw U(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var W=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw U(P.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=V(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}();function K(e){var t=new W(e);return t.base64?F(P.BASE64,t.rest):x(t.rest)}function G(e){var t=new W(e);return t.contentType}function V(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}var H,q={STATE_CHANGED:"state_changed"},z={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},X={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Y(e){switch(e){case z.RUNNING:case z.PAUSING:case z.CANCELING:return X.RUNNING;case z.PAUSED:return X.PAUSED;case z.SUCCESS:return X.SUCCESS;case z.CANCELED:return X.CANCELED;case z.ERROR:return X.ERROR;default:return X.ERROR}}function J(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t){for(var n in e)J(e,n)&&t(n,e[n])}function $(e){if(null==e)return{};var t={};return Z(e,function(e,n){t[e]=n}),t}function Q(e){return new Promise(e)}function ee(e){return Promise.resolve(e)}function te(e){return Promise.reject(e)}function ne(e){return null!=e}function re(e){return void 0!==e}function oe(e){return"function"===typeof e}function ie(e){return"object"===typeof e}function ae(e){return ie(e)&&null!==e}function se(e){return ie(e)&&!Array.isArray(e)}function ue(e){return"string"===typeof e||e instanceof String}function ce(e){return"number"===typeof e||e instanceof Number}function le(e){return he()&&e instanceof Blob}function he(){return"undefined"!==typeof Blob}(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(H||(H={}));var pe=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=H.NO_ERROR,this.sendPromise_=Q(function(t,n){e.xhr_.addEventListener("abort",function(n){e.errorCode_=H.ABORT,t(e)}),e.xhr_.addEventListener("error",function(n){e.errorCode_=H.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(n){t(e)})})}return e.prototype.send=function(e,t,n,r){var o=this;if(this.sent_)throw C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),ne(r)){var i=r;Z(i,function(e,t){o.xhr_.setRequestHeader(e,t.toString())})}return ne(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw C("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw C("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw C("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){ne(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){ne(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),fe=function(){function e(){}return e.prototype.createXhrIo=function(){return new pe},e}();function de(e){var t;try{t=JSON.parse(e)}catch(e){return null}return se(t)?t:null}var _e=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw O(t)},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-]+)";function o(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}var i="(/(.*))?$",a="(/([^?#]*).*)?$",s=new RegExp("^gs://"+r+i,"i"),u={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}for(var l="v[A-Za-z0-9_]+",h=new RegExp("^https?://firebasestorage\\.googleapis\\.com/"+l+"/b/"+r+"/o"+a,"i"),p={bucket:1,path:3},f=[{regex:s,indices:u,postModify:o},{regex:h,indices:p,postModify:c}],d=0;d<f.length;d++){var _=f[d],b=_.regex.exec(t);if(b){var g=b[_.indices.bucket],v=b[_.indices.path];v||(v=""),n=new e(g,v),_.postModify(n);break}}if(null==n)throw w(t);return n},e}();function be(e){if(0==e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";var n=e.slice(0,t);return n}function ge(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function ve(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ee(e){return i+s+e}function me(e){return a+s+e}function ye(e){return i+u+e}function Te(e){var t=encodeURIComponent,n="?";return Z(e,function(e,r){var o=t(e)+"="+t(r);n=n+o+"&"}),n=n.slice(0,-1),n}function we(e,t){return t}var Oe=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||we}return e}(),Se=null;function Ne(e){var t=ue(e);return!t||e.length<2?e:(e=e,ve(e))}function Re(){if(Se)return Se;var e=[];function t(e,t){return Ne(t)}e.push(new Oe("bucket")),e.push(new Oe("generation")),e.push(new Oe("metageneration")),e.push(new Oe("name","fullPath",!0));var n=new Oe("name");function r(e,t){return ne(t)?+t:t}n.xform=t,e.push(n);var o=new Oe("size");return o.xform=r,e.push(o),e.push(new Oe("timeCreated")),e.push(new Oe("updated")),e.push(new Oe("md5Hash",null,!0)),e.push(new Oe("cacheControl",null,!0)),e.push(new Oe("contentDisposition",null,!0)),e.push(new Oe("contentEncoding",null,!0)),e.push(new Oe("contentLanguage",null,!0)),e.push(new Oe("contentType",null,!0)),e.push(new Oe("metadata","customMetadata",!0)),Se=e,Se}function Ie(e,t){function n(){var n=e["bucket"],r=e["fullPath"],o=new _e(n,r);return t.makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function Ae(e,t,n){for(var r={type:"file"},o=n.length,i=0;i<o;i++){var a=n[i];r[a.local]=a.xform(r,t[a.server])}return Ie(r,e),r}function De(e,t,n){var r=de(t);if(null===r)return null;var o=r;return Ae(e,o,n)}function ke(e,t){var n=de(t);if(null===n)return null;if(!ue(n["downloadTokens"]))return null;var r=n["downloadTokens"];if(0===r.length)return null;var o=encodeURIComponent,i=r.split(","),a=i.map(function(t){var n=e["bucket"],r=e["fullPath"],i="/b/"+o(n)+"/o/"+o(r),a=me(i),s=Te({alt:"media",token:t});return a+s});return a[0]}function Ue(e,t){for(var n={},r=t.length,o=0;o<r;o++){var i=t[o];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}function Ce(e){var t=e&&ie(e);if(!t)throw"Expected Metadata object.";for(var n in e){var r=e[n];if("customMetadata"===n){if(!ie(r))throw"Expected object for 'customMetadata' mapping."}else if(ae(r))throw"Mapping for '"+n+"' cannot be an object."}}function Pe(e,t,n){for(var r=t.length,o=t.length,i=0;i<t.length;i++)if(t[i].optional){r=i;break}var a=r<=n.length&&n.length<=o;if(!a)throw A(r,o,e,n.length);for(i=0;i<n.length;i++)try{t[i].validator(n[i])}catch(t){throw t instanceof Error?I(i,e,t.message):I(i,e,t)}}var Le=function(){function e(e,t){var n=this;this.validator=function(t){n.optional&&!re(t)||e(t)},this.optional=!!t}return e}();function Be(e,t){return function(n){e(n),t(n)}}function je(e,t){function n(e){if(!ue(e))throw"Expected string."}var r;return r=e?Be(n,e):n,new Le(r,t)}function Me(){function e(e){var t=e instanceof Uint8Array||e instanceof ArrayBuffer||he()&&e instanceof Blob;if(!t)throw"Expected Blob or File."}return new Le(e)}function xe(e){return new Le(Ce,e)}function Fe(){function e(e){var t=ce(e)&&e>=0;if(!t)throw"Expected a number 0 or greater."}return new Le(e)}function We(e,t){function n(t){var n=null===t||ne(t)&&t instanceof Object;if(!n)throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}return new Le(n,t)}function Ke(e){function t(e){var t=null===e||oe(e);if(!t)throw"Expected a Function."}return new Le(t,e)}function Ge(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ge();if(void 0!==n){for(var r=new n,o=0;o<e.length;o++)r.append(e[o]);return r.getBlob()}if(he())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function He(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}var qe=function(){function e(e,t){var n=0,r="";le(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(le(this.data_)){var r=this.data_,o=He(r,t,n);return null===o?null:new e(o)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(he()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(Ve.apply(null,r))}var o=t.map(function(e){return ue(e)?j(P.RAW,e).data:e.data_}),i=0;o.forEach(function(e){i+=e.byteLength});var a=new Uint8Array(i),s=0;return o.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function ze(e,t){return-1!==e.indexOf(t)}function Xe(e){return Array.prototype.slice.call(e)}function Ye(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var Je=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();function Ze(e){if(!e)throw b()}function $e(e,t){function n(n,r){var o=De(e,r,t);return Ze(null!==o),o}return n}function Qe(e,t){function n(n,r){var o=De(e,r,t);return Ze(null!==o),ke(o,r)}return n}function et(e){function t(t,n){var r;return r=401===t.getStatus()?E():402===t.getStatus()?v(e.bucket):403===t.getStatus()?m(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function tt(e){var t=et(e);function n(n,r){var o=t(n,r);return 404===n.getStatus()&&(o=g(e.path)),o.setServerResponseProp(r.serverResponseProp()),o}return n}function nt(e,t,n){var r=t.fullServerUrl(),o=Ee(r),i="GET",a=e.maxOperationRetryTime(),s=new Je(o,i,$e(e,n),a);return s.errorHandler=tt(t),s}function rt(e,t,n){var r=t.fullServerUrl(),o=Ee(r),i="GET",a=e.maxOperationRetryTime(),s=new Je(o,i,Qe(e,n),a);return s.errorHandler=tt(t),s}function ot(e,t,n,r){var o=t.fullServerUrl(),i=Ee(o),a="PATCH",s=Ue(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime(),l=new Je(i,a,$e(e,r),c);return l.headers=u,l.body=s,l.errorHandler=tt(t),l}function it(e,t){var n=t.fullServerUrl(),r=Ee(n),o="DELETE",i=e.maxOperationRetryTime();function a(e,t){}var s=new Je(r,o,a,i);return s.successCodes=[200,204],s.errorHandler=tt(t),s}function at(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function st(e,t,n){var r=$(n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=at(null,t)),r}function ut(e,t,n,r,o){var i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=st(t,r,o),l=Ue(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",p="\r\n--"+u+"--",f=qe.getBlob(h,r,p);if(null===f)throw S();var d={name:c["fullPath"]},_=ye(i),b="POST",g=e.maxUploadRetryTime(),v=new Je(_,b,$e(e,n),g);return v.urlParams=d,v.headers=a,v.body=f.uploadData(),v.errorHandler=et(t),v}var ct=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}();function lt(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Ze(!1)}var r=t||["active"];return Ze(ze(r,n)),n}function ht(e,t,n,r,o){var i=t.bucketOnlyServerUrl(),a=st(t,r,o),s={name:a["fullPath"]},u=ye(i),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=Ue(a,n),p=e.maxUploadRetryTime();function f(e,t){var n;lt(e);try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Ze(!1)}return Ze(ue(n)),n}var d=new Je(u,c,f,p);return d.urlParams=s,d.headers=l,d.body=h,d.errorHandler=et(t),d}function pt(e,t,n,r){var o={"X-Goog-Upload-Command":"query"};function i(e,t){var n,o=lt(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Ze(!1)}var i=parseInt(n,10);return Ze(!isNaN(i)),new ct(i,r.size(),"final"===o)}var a="POST",s=e.maxUploadRetryTime(),u=new Je(n,a,i,s);return u.headers=o,u.errorHandler=et(t),u}var ft=262144;function dt(e,t,n,r,o,i,a,s){var u=new ct(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw N();var c=u.total-u.current,l=c;o>0&&(l=Math.min(l,o));var h=u.current,p=h+l,f=l===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":u.current},_=r.slice(h,p);if(null===_)throw S();function b(e,n){var o,a=lt(e,["active","final"]),s=u.current+l,c=r.size();return o="final"===a?$e(t,i)(e,n):null,new ct(s,c,"final"===a,o)}var g="POST",v=t.maxUploadRetryTime(),E=new Je(n,g,b,v);return E.headers=d,E.body=_.uploadData(),E.progressCallback=s||null,E.errorHandler=et(e),E}var _t=function(){function e(e,t,n){var r=oe(e)||ne(t)||ne(n);if(r)this.next=e,this.error=t||null,this.complete=n||null;else{var o=e;this.next=o.next||null,this.error=o.error||null,this.complete=o.complete||null}}return e}(),bt=function(){function e(e,t,n,r,o,i){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=o,this.ref=i}return e}();function gt(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ee(!0).then(function(){e.apply(null,t)})}}var vt=function(){function e(e,t,n,r,o,i){void 0===i&&(i=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=o,this.metadata_=i,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=z.RUNNING,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(d.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(z.ERROR))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(d.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(z.ERROR))},this.promise_=Q(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===z.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case z.RUNNING:e(n);break;case z.CANCELING:t.transition_(z.CANCELED);break;case z.PAUSING:t.transition_(z.PAUSED);break;default:}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=ht(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=pt(e.authWrapper_,e.location_,t,e.blob_),o=e.authWrapper_.makeRequest(r,n);e.request_=o,o.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=ft*this.chunkMultiplier_,n=new ct(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(o){var i;try{i=dt(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(z.ERROR)}var a=e.authWrapper_.makeRequest(i,o);e.request_=a,a.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(z.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){var e=ft*this.chunkMultiplier_;e<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=nt(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(z.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=ut(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(z.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case z.CANCELING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case z.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case z.RUNNING:var t=this.state_===z.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case z.PAUSED:this.state_=e,this.notifyObservers_();break;case z.CANCELED:this.error_=T(),this.state_=e,this.notifyObservers_();break;case z.ERROR:this.state_=e,this.notifyObservers_();break;case z.SUCCESS:this.state_=e,this.notifyObservers_();break}},e.prototype.completeTransitions_=function(){switch(this.state_){case z.PAUSING:this.transition_(z.PAUSED);break;case z.CANCELING:this.transition_(z.CANCELED);break;case z.RUNNING:this.start_();break;default:break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Y(this.state_);return new bt(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function o(t){if(e!==q.STATE_CHANGED)throw"Expected one of the event types: ["+q.STATE_CHANGED+"]."}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=Ke(!0).validator,s=We(null,!0).validator;function u(e){try{return void a(e)}catch(e){}try{s(e);var t=re(e["next"])||re(e["error"])||re(e["complete"]);if(!t)throw"";return}catch(e){throw i}}var c=[je(o),We(u,!0),Ke(!0),Ke(!0)];Pe("on",c,arguments);var l=this;function h(e){function t(t,n,o){null!==e&&Pe("on",e,arguments);var i=new _t(t,n,r);return l.addObserver_(i),function(){l.removeObserver_(i)}}return t}function p(e){if(null===e)throw i;u(e)}var f=[We(p),Ke(!0),Ke(!0)],d=!(re(t)||re(n)||re(r));return d?h(f):h(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){Ye(this.observers_,e)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_();var t=Xe(this.observers_);t.forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(Y(this.state_)){case X.SUCCESS:gt(this.resolve_.bind(null,this.snapshot))();break;case X.CANCELED:case X.ERROR:var t=this.reject_;gt(t.bind(null,this.error_))();break;default:e=!1;break}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){var t=Y(this.state_);switch(t){case X.RUNNING:case X.PAUSED:null!==e.next&&gt(e.next.bind(e,this.snapshot))();break;case X.SUCCESS:null!==e.complete&&gt(e.complete.bind(e))();break;case X.CANCELED:case X.ERROR:null!==e.error&&gt(e.error.bind(e,this.error_))();break;default:null!==e.error&&gt(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Pe("resume",[],arguments);var e=this.state_===z.PAUSED||this.state_===z.PAUSING;return e&&this.transition_(z.RUNNING),e},e.prototype.pause=function(){Pe("pause",[],arguments);var e=this.state_===z.RUNNING;return e&&this.transition_(z.PAUSING),e},e.prototype.cancel=function(){Pe("cancel",[],arguments);var e=this.state_===z.RUNNING||this.state_===z.PAUSING;return e&&this.transition_(z.CANCELING),e},e}(),Et=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof _e?t:_e.makeFromUrl(t)}return e.prototype.toString=function(){return Pe("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return Re()},e.prototype.child=function(e){Pe("child",[je()],arguments);var t=ge(this.location.path,e),n=new _e(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=be(this.location.path);if(null===e)return null;var t=new _e(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new _e(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return ve(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Pe("put",[Me(),xe(!0)],arguments),this.throwIfRoot_("put"),new vt(this,this.authWrapper,this.location,this.mappings(),new qe(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=P.RAW),Pe("putString",[je(),je(L,!0),xe(!0)],arguments),this.throwIfRoot_("putString");var r=j(t,e),o=$(n);return!ne(o["contentType"])&&ne(r.contentType)&&(o["contentType"]=r.contentType),new vt(this,this.authWrapper,this.location,this.mappings(),new qe(r.data,!0),o)},e.prototype.delete=function(){Pe("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=it(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.getMetadata=function(){Pe("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=nt(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){Pe("updateMetadata",[xe()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=ot(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){Pe("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=rt(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw R();return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw k(e)},e}(),mt=function(){function e(e){this.promise_=te(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}(),yt=function(){function e(){this.map_={},this.id_=p}return e.prototype.addRequest=function(e){var t=this.id_;this.id_++,this.map_[t]=e;var n=this;function r(){delete n.map_[t]}e.getPromise().then(r,r)},e.prototype.clear=function(){Z(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},e}(),Tt=function(){function e(t,n,r,o,i){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;ne(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=i,this.service_=o,this.maxOperationRetryTime_=l,this.maxUploadRetryTime_=h,this.requestMap_=new yt}return e.extractBucket_=function(e){var t=e[c]||null;if(null==t)return null;var n=_e.makeFromBucketSpec(t);return n.bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&ne(this.app_.INTERNAL)&&ne(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):ee(null)},e.prototype.bucket=function(){if(this.deleted_)throw D();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new mt(D());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}();function wt(e,t,n){var r=1,o=null,i=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,t.apply(null,arguments))}function l(t){o=setTimeout(function(){o=null,e(h,s())},t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.apply(null,arguments);else{var o,h=s()||i;if(h)c.apply(null,arguments);else r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),l(o)}}var p=!1;function f(e){p||(p=!0,u||(null!==o?(e||(a=2),clearTimeout(o),l(0)):e||(a=1)))}return l(0),setTimeout(function(){i=!0,f(!0)},n),f}function Ot(e){e(!1)}var St=function(){function e(e,t,n,r,o,i,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=Q(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){if(n)t(!1,new Nt(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(o),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(o),e.pendingXhr_=null,n=n;var r=n.getErrorCode()===H.NO_ERROR,i=n.getStatus();if(r&&!e.isRetryStatusCode_(i)){var a=ze(e.successCodes_,i);t(!0,new Nt(a,n))}else{var s=n.getErrorCode()===H.ABORT;t(!1,new Nt(!1,null,s))}})}function o(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}function n(t,n){var r=e.resolve_,o=e.reject_,i=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(i,i.getResponseText());re(a)?r(a):r()}catch(e){o(e)}else if(null!==i){var s=b();s.setServerResponseProp(i.getResponseText()),e.errorCallback_?o(e.errorCallback_(i,s)):o(s)}else if(n.canceled){s=e.appDelete_?D():T();o(s)}else{s=y();o(s)}}this.canceled_?n(!1,new Nt(!1,null,!0)):this.backoffId_=wt(t,n,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&Ot(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=ze(n,e),o=ze(this.additionalRetryCodes_,e);return t||r||o},e}(),Nt=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}();function Rt(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function It(e){var t="undefined"!==typeof o.a?o.a.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function At(e,t,n){var r=Te(e.urlParams),o=e.url+r,i=$(e.headers);return Rt(i,t),It(i),new St(o,e.method,i,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var Dt=function(){function e(e,t,n){function r(e,t){return new Et(e,t)}if(this.bucket_=null,this.authWrapper_=new Tt(e,r,At,this,t),this.app_=e,null!=n)this.bucket_=_e.makeFromBucketSpec(n);else{var o=this.authWrapper_.bucket();null!=o&&(this.bucket_=new _e(o,""))}this.internals_=new kt(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Pe("ref",[je(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Et(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{_e.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return Pe("refFromURL",[je(t,!1)],arguments),new Et(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Pe("setMaxUploadRetryTime",[Fe()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){Pe("setMaxOperationRetryTime",[Fe()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),kt=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),ee(void 0)},e}(),Ut="storage";function Ct(e,t,n){return new Dt(e,new fe,n)}function Pt(e){var t={TaskState:X,TaskEvent:q,StringFormat:P,Storage:Dt,Reference:Et};e.INTERNAL.registerService(Ut,Ct,t,void 0,!0)}Pt(o.a)},gHGA:function(e,t,n){"use strict";n.r(t),n.d(t,"registerMessaging",function(){return K}),n.d(t,"isSupported",function(){return G});var r,o,i,a=n("zVF4"),s=n("mrSG"),u=n("wj3C"),c=n.n(u),l={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},h=(r={},r[l.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",r[l.AVAILABLE_IN_SW]="This method is available in a service worker context.",r[l.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",r[l.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r[l.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",r[l.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",r[l.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",r[l.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",r[l.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",r[l.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",r[l.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",r[l.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",r[l.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",r[l.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",r[l.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",r[l.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",r[l.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",r[l.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",r[l.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",r[l.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r[l.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r[l.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",r[l.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r[l.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",r[l.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",r[l.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",r[l.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r[l.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",r[l.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r[l.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",r[l.BAD_SCOPE]="The service worker scope must be a string with at least one character.",r[l.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",r[l.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",r[l.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",r[l.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",r[l.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",r[l.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",r[l.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",r),p=new a["ErrorFactory"]("messaging","Messaging",h),f=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),d="https://fcm.googleapis.com";function _(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),o=0;o<e.byteLength;o++)if(n.getUint8(o)!==r.getUint8(o))return!1;return!0}function b(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(null,t))}function g(e){var t=b(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(function(e){e["TYPE_OF_MSG"]="firebase-messaging-msg-type",e["DATA"]="firebase-messaging-msg-data"})(o||(o={})),function(e){e["PUSH_MSG_RECEIVED"]="push-msg-received",e["NOTIFICATION_CLICKED"]="notification-clicked"}(i||(i={}));var v=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(s["__awaiter"])(this,void 0,void 0,function(){var r,o,i,a,u,c,h,b,v;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:r=g(t.getKey("p256dh")),o=g(t.getKey("auth")),i="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+o,_(n.buffer,f.buffer)||(a=g(n),i+="&application_pub_key="+a),u=new Headers,u.append("Content-Type","application/x-www-form-urlencoded"),c={method:"POST",headers:u,body:i},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(d+"/fcm/connect/subscribe",c)];case 2:return b=s.sent(),[4,b.json()];case 3:return h=s.sent(),[3,5];case 4:throw s.sent(),p.create(l.TOKEN_SUBSCRIBE_FAILED);case 5:if(h.error)throw v=h.error.message,p.create(l.TOKEN_SUBSCRIBE_FAILED,{message:v});if(!h.token)throw p.create(l.TOKEN_SUBSCRIBE_NO_TOKEN);if(!h.pushSet)throw p.create(l.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:h.token,pushSet:h.pushSet}]}})})},e.prototype.updateToken=function(e,t,n,r,o){return Object(s["__awaiter"])(this,void 0,void 0,function(){var i,a,u,c,h,b,v,E,m;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:i=g(r.getKey("p256dh")),a=g(r.getKey("auth")),u="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+r.endpoint+"&encryption_key="+i+"&encryption_auth="+a,_(o.buffer,f.buffer)||(c=g(o),u+="&application_pub_key="+c),h=new Headers,h.append("Content-Type","application/x-www-form-urlencoded"),b={method:"POST",headers:h,body:u},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(d+"/fcm/connect/subscribe",b)];case 2:return E=s.sent(),[4,E.json()];case 3:return v=s.sent(),[3,5];case 4:throw s.sent(),p.create(l.TOKEN_UPDATE_FAILED);case 5:if(v.error)throw m=v.error.message,p.create(l.TOKEN_UPDATE_FAILED,{message:m});if(!v.token)throw p.create(l.TOKEN_UPDATE_NO_TOKEN);return[2,v.token]}})})},e.prototype.deleteToken=function(e,t,n){return Object(s["__awaiter"])(this,void 0,void 0,function(){var r,o,i,a,u,c;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:r="authorized_entity="+e+"&token="+t+"&pushSet="+n,o=new Headers,o.append("Content-Type","application/x-www-form-urlencoded"),i={method:"POST",headers:o,body:r},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(d+"/fcm/connect/unsubscribe",i)];case 2:return a=s.sent(),[4,a.json()];case 3:if(u=s.sent(),u.error)throw c=u.error.message,p.create(l.TOKEN_UNSUBSCRIBE_FAILED,{message:c});return[3,5];case 4:throw s.sent(),p.create(l.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},e}();function E(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r.charCodeAt(i);return o}var m="undefined",y="fcm_token_object_Store";function T(e){if(e.objectStoreNames.contains(y)){var t=e.transaction(y),n=t.objectStore(y),r=new v,o=n.openCursor();o.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},o.onsuccess=function(){var t=o.result;if(t){var n=t.value;r.deleteToken(n.fcmSenderId,n.fcmToken,n.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(m)}}}function w(){var e=indexedDB.open(m);e.onerror=function(e){},e.onsuccess=function(t){var n=e.result;T(n)}}var O=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},e.prototype.getIndex=function(e,t){function n(n){var r=n.index(e);return r.get(t)}return this.createTransaction(n)},e.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},e.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},e.prototype.closeDatabase=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e=t.sent(),e.close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(s["__awaiter"])(this,void 0,void 0,function(){var n,r,o,i;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),o=r.objectStore(this.objectStoreName),[4,S(e(o))];case 2:return i=a.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(i)},r.onerror=function(){t(r.error)}})]}})})},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}})),this.dbPromise},e}();function S(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return Object(s["__extends"])(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:var r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"});r.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:w();case 2:r=e.transaction.objectStore(this.objectStoreName);var o=r.openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(s["__assign"])({},t);t.createTime||(n.createTime=Date.now()),"string"===typeof t.vapidKey&&(n.vapidKey=E(t.vapidKey)),"string"===typeof t.auth&&(n.auth=E(t.auth).buffer),"string"===typeof t.auth&&(n.p256dh=E(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e)throw p.create(l.BAD_TOKEN);return R({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e)throw p.create(l.BAD_SCOPE);return R({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){if(!e.swScope)throw p.create(l.BAD_SCOPE);if(!e.vapidKey)throw p.create(l.BAD_VAPID_KEY);if(!e.endpoint||!e.auth||!e.p256dh)throw p.create(l.BAD_SUBSCRIPTION);if(!e.fcmSenderId)throw p.create(l.BAD_SENDER_ID);if(!e.fcmToken)throw p.create(l.BAD_TOKEN);if(!e.fcmPushSet)throw p.create(l.BAD_PUSH_SET);return R(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return"string"!==typeof e||0===e.length?[2,Promise.reject(p.create(l.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(t=n.sent(),!t)throw p.create(l.DELETE_TOKEN_NOT_FOUND);return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},t}(O);function R(e){if(e.fcmToken&&("string"!==typeof e.fcmToken||0===e.fcmToken.length))throw p.create(l.BAD_TOKEN);if(e.swScope&&("string"!==typeof e.swScope||0===e.swScope.length))throw p.create(l.BAD_SCOPE);if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw p.create(l.BAD_VAPID_KEY);if(e.endpoint&&("string"!==typeof e.endpoint||0===e.endpoint.length))throw p.create(l.BAD_SUBSCRIPTION);if(e.auth&&!(e.auth instanceof ArrayBuffer))throw p.create(l.BAD_SUBSCRIPTION);if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw p.create(l.BAD_SUBSCRIPTION);if(e.fcmSenderId&&("string"!==typeof e.fcmSenderId||0===e.fcmSenderId.length))throw p.create(l.BAD_SENDER_ID);if(e.fcmPushSet&&("string"!==typeof e.fcmPushSet||0===e.fcmPushSet.length))throw p.create(l.BAD_PUSH_SET)}var I=65,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(s["__extends"])(t,e),t.prototype.onDbUpgrade=function(e){var t=e.result;t.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:if("string"!==typeof e||0===e.length)throw p.create(l.BAD_SCOPE);return[4,this.get(e)];case 1:return t=n.sent(),[2,t?t.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){var n;return Object(s["__generator"])(this,function(r){if("string"!==typeof e||0===e.length)throw p.create(l.BAD_SCOPE);if(null===t||t.length!==I)throw p.create(l.BAD_VAPID_KEY);return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},t.prototype.deleteVapidDetails=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(t=n.sent(),!t)throw p.create(l.DELETE_SCOPE_NOT_FOUND);return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},t}(O),D="messagingSenderId",k=6048e5,U=function(){function e(e){var t=this;if(!e.options[D]||"string"!==typeof e.options[D])throw p.create(l.BAD_SENDER_ID);this.messagingSenderId=e.options[D],this.tokenDetailsModel=new N,this.vapidDetailsModel=new A,this.iidModel=new v,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t,n,r,o;return Object(s["__generator"])(this,function(i){switch(i.label){case 0:if(e=this.getNotificationPermission_(),"denied"===e)throw p.create(l.NOTIFICATIONS_BLOCKED);return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=i.sent(),[4,this.getPublicVapidKey_()];case 2:return n=i.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=i.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return o=i.sent(),o?[2,this.manageExistingToken(t,r,n,o)]:[2,this.getNewToken(t,r,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,r){return Object(s["__awaiter"])(this,void 0,void 0,function(){var o,i;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return o=C(t,n,r),o?(i=Date.now(),i<r.createTime+k?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]):[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return a.sent(),[2,this.getNewToken(e,t,n)]}})})},e.prototype.updateToken=function(e,t,n,r){return Object(s["__awaiter"])(this,void 0,void 0,function(){var o,i,a;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return o=s.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:o,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,o];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return Object(s["__awaiter"])(this,void 0,void 0,function(){var r,o;return Object(s["__generator"])(this,function(i){switch(i.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=i.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return i.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return i.sent(),[2,r.token]}})})},e.prototype.deleteToken=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n;return Object(s["__generator"])(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return t=r.sent(),t?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent(),n)return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}})})},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},e.prototype.requestPermission=function(){throw p.create(l.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(e){throw p.create(l.AVAILABLE_IN_WINDOW)},e.prototype.usePublicVapidKey=function(e){throw p.create(l.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,n){throw p.create(l.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,n){throw p.create(l.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw p.create(l.AVAILABLE_IN_SW)},e.prototype.delete=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}();function C(e,t,n){if(!n.vapidKey||!_(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,o=_(e.getKey("auth"),n.auth),i=_(e.getKey("p256dh"),n.p256dh);return r&&o&&i}var P="FCM_MSG",L=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(e){n.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){n.onSubChange(e)}),self.addEventListener("notificationclick",function(e){n.onNotificationClick(e)}),n}return Object(s["__extends"])(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,o,i,a,u;return Object(s["__generator"])(this,function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return n=s.sent(),n?[2,this.sendMessageToWindowClients_(t)]:(r=this.getNotificationData_(t),r?(o=r.title||"",[4,this.getSWRegistration_()]):[3,3]);case 2:return i=s.sent(),a=r.actions,u=Notification.maxActions,a&&u&&a.length>u&&console.warn("This browser only supports "+u+" actions.The remaining actions will not be displayed."),[2,i.showNotification(o,r)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t,n,r,o;return Object(s["__generator"])(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),p.create(l.UNABLE_TO_RESUBSCRIBE,{message:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),r=this.getTokenDetailsModel(),[4,r.getTokenDetailsFromSWScope(e.scope)];case 6:if(o=i.sent(),!o)throw n;return[4,this.deleteToken(o.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,o;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return e.notification&&e.notification.data&&e.notification.data[P]?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),t=e.notification.data[P],t.notification?(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action,n?[4,this.getWindowClient_(n)]:[2]):[2]):[2];case 1:return r=a.sent(),r?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=a.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=a.sent(),a.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,o=j(i.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,o)]):[2]}})})},t.prototype.getNotificationData_=function(e){if(e&&"object"===typeof e.notification){var t,n=Object(s["__assign"])({},e.notification);return n.data=Object(s["__assign"])({},e.notification.data,(t={},t[P]=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!==typeof e)throw p.create(l.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r,o,i;return Object(s["__generator"])(this,function(a){switch(a.label){case 0:return t=new URL(e,self.location.href).href,[4,B()];case 1:for(n=a.sent(),r=null,o=0;o<n.length;o++)if(i=new URL(n[o].url,self.location.href).href,i===t){r=n[o];break}return[2,r]}})})},t.prototype.attemptToMessageClient_=function(e,t){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(n){if(!e)throw p.create(l.NO_WINDOW_CLIENT_TO_MSG);return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return[4,B()];case 1:return e=t.sent(),[2,e.some(function(e){return"visible"===e.visibilityState})]}})})},t.prototype.sendMessageToWindowClients_=function(e){return Object(s["__awaiter"])(this,void 0,void 0,function(){var t,n,r=this;return Object(s["__generator"])(this,function(o){switch(o.label){case 0:return[4,B()];case 1:return t=o.sent(),n=j(i.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return o.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t;return Object(s["__generator"])(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(e=n.sent(),!e)throw p.create(l.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return t=n.sent(),null==t?[2,f]:[2,t]}})})},t}(U);function B(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function j(e,t){return n={},n[o.TYPE_OF_MSG]=e,n[o.DATA]=t,n;var n}var M="/firebase-messaging-sw.js",x="/firebase-cloud-messaging-push-scope",F=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(a["createSubscribe"])(function(e){n.messageObserver=e}),n.onTokenRefreshInternal=Object(a["createSubscribe"])(function(e){n.tokenRefreshObserver=e}),n.setupSWMessageListener_(),n}return Object(s["__extends"])(t,e),t.prototype.getToken=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=W()),[4,this.manifestCheckPromise];case 1:return t.sent(),[2,e.prototype.getToken.call(this)]}})})},t.prototype.requestPermission=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e;return Object(s["__generator"])(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?p.create(l.PERMISSION_BLOCKED):p.create(l.PERMISSION_DEFAULT)}})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw p.create(l.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw p.create(l.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!==typeof e)throw p.create(l.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw p.create(l.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var t=E(e);if(65!==t.length)throw p.create(l.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"===typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"===typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var o=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(p.create(l.SW_REG_REDUNDANT))}t.removeEventListener("statechange",o)};t.addEventListener("statechange",o)}else r(p.create(l.SW_REG_REDUNDANT));else n(e);else r(p.create(l.NO_SW_IN_REG))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register(M,{scope:x}).catch(function(e){throw p.create(l.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse=t,t.update(),t})}))},t.prototype.getPublicVapidKey_=function(){return Object(s["__awaiter"])(this,void 0,void 0,function(){return Object(s["__generator"])(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,f]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[o.TYPE_OF_MSG]){var n=t.data;switch(n[o.TYPE_OF_MSG]){case i.PUSH_MSG_RECEIVED:case i.NOTIFICATION_CLICKED:var r=n[o.DATA];e.messageObserver&&e.messageObserver.next(r);break;default:break}}},!1)},t}(U);function W(){return Object(s["__awaiter"])(this,void 0,void 0,function(){var e,t,n;return Object(s["__generator"])(this,function(r){switch(r.label){case 0:if(e=document.querySelector('link[rel="manifest"]'),!e)return[2];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,fetch(e.href)];case 2:return n=r.sent(),[4,n.json()];case 3:return t=r.sent(),[3,5];case 4:return r.sent(),[2];case 5:if(!t||!t.gcm_sender_id)return[2];if("103953800507"!==t.gcm_sender_id)throw p.create(l.INCORRECT_GCM_SENDER_ID);return[2]}})})}function K(e){var t="messaging",n=function(e){if(!G())throw p.create(l.UNSUPPORTED_BROWSER);return self&&"ServiceWorkerGlobalScope"in self?new L(e):new F(e)},r={isSupported:G};e.INTERNAL.registerService(t,n,r)}function G(){return self&&"ServiceWorkerGlobalScope"in self?H():V()}function V(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function H(){return"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}K(c.a)},iqUP:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}n("lcbw");var o=r(n("wj3C"));n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),e.exports=o}}]);